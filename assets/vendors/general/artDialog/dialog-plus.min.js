!function(){var r={};function s(t){var e=r[t];var i="exports";if(typeof e==="object"){return e}if(!e[i]){e[i]={};e[i]=e.call(e[i],s,e[i],e)||e[i]}return e[i]}function t(t,e){r[t]=e}t("jquery",function(){return jQuery});t("popup",function(t){var j=t("jquery");var e=0;var n=!("minWidth"in j("html")[0].style);var a=!n;function o(){this.destroyed=false;this.__popup=j("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body");this.__backdrop=this.__mask=j("<div />").css({opacity:.7,background:"#000"});this.node=this.__popup[0];this.backdrop=this.__backdrop[0];e++}j.extend(o.prototype,{node:null,backdrop:null,fixed:false,destroyed:true,open:false,returnValue:"",autofocus:true,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(t){if(this.destroyed){return this}var e=this;var i=this.__popup;var r=this.__backdrop;this.__activeElement=this.__getActive();this.open=true;this.follow=t||this.follow;if(!this.__ready){i.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute");if(!n){j(window).on("resize",j.proxy(this.reset,this))}if(this.modal){var s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||o.zIndex};i.addClass(this.className+"-modal");if(!a){j.extend(s,{position:"absolute",width:j(window).width()+"px",height:j(document).height()+"px"})}r.css(s).attr({tabindex:"0"}).on("focus",j.proxy(this.focus,this));this.__mask=r.clone(true).attr("style","").insertAfter(i);r.addClass(this.className+"-backdrop").insertBefore(i);this.__ready=true}if(!i.html()){i.html(this.innerHTML)}}i.addClass(this.className+"-show").show();r.show();this.reset().focus();this.__dispatchEvent("show");return this},showModal:function(){this.modal=true;return this.show.apply(this,arguments)},close:function(t){if(!this.destroyed&&this.open){if(t!==undefined){this.returnValue=t}this.__popup.hide().removeClass(this.className+"-show");this.__backdrop.hide();this.open=false;this.blur();this.__dispatchEvent("close")}return this},remove:function(){if(this.destroyed){return this}this.__dispatchEvent("beforeremove");if(o.current===this){o.current=null}this.__popup.remove();this.__backdrop.remove();this.__mask.remove();if(!n){j(window).off("resize",this.reset)}this.__dispatchEvent("remove");for(var t in this){delete this[t]}return this},reset:function(){var t=this.follow;if(t){this.__follow(t)}else{this.__center()}this.__dispatchEvent("reset");return this},focus:function(){var t=this.node;var e=this.__popup;var i=o.current;var r=this.zIndex=o.zIndex++;if(i&&i!==this){i.blur(false)}if(!j.contains(t,this.__getActive())){var s=e.find("[autofocus]")[0];if(!this._autofocus&&s){this._autofocus=true}else{s=t}this.__focus(s)}e.css("zIndex",r);o.current=this;e.addClass(this.className+"-focus");this.__dispatchEvent("focus");return this},blur:function(){var t=this.__activeElement;var e=arguments[0];if(e!==false){this.__focus(t)}this._autofocus=false;this.__popup.removeClass(this.className+"-focus");this.__dispatchEvent("blur");return this},addEventListener:function(t,e){this.__getEventListener(t).push(e);return this},removeEventListener:function(t,e){var i=this.__getEventListener(t);for(var r=0;r<i.length;r++){if(e===i[r]){i.splice(r--,1)}}return this},__getEventListener:function(t){var e=this.__listener;if(!e){e=this.__listener={}}if(!e[t]){e[t]=[]}return e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);if(this["on"+t]){this["on"+t]()}for(var i=0;i<e.length;i++){e[i].call(this)}},__focus:function(t){try{if(this.autofocus&&!/^iframe$/i.test(t.nodeName)){t.focus()}}catch(t){}},__getActive:function(){try{var t=document.activeElement;var e=t.contentDocument;var i=e&&e.activeElement||t;return i}catch(t){}},__center:function(){var t=this.__popup;var e=j(window);var i=j(document);var r=this.fixed;var s=r?0:i.scrollLeft();var n=r?0:i.scrollTop();var a=e.width();var o=e.height();var l=t.width();var c=t.height();var h=(a-l)/2+s;var u=(o-c)*382/1e3+n;var d=t[0].style;d.left=Math.max(parseInt(h),s)+"px";d.top=Math.max(parseInt(u),n)+"px"},__follow:function(t){var e=t.parentNode&&j(t);var i=this.__popup;if(this.__followSkin){i.removeClass(this.__followSkin)}if(e){var r=e.offset();if(r.left*r.top<0){return this.__center()}}var s=this;var n=this.fixed;var a=j(window);var o=j(document);var l=a.width();var c=a.height();var h=o.scrollLeft();var u=o.scrollTop();var d=i.width();var f=i.height();var v=e?e.outerWidth():0;var p=e?e.outerHeight():0;var _=this.__offset(t);var m=_.left;var g=_.top;var b=n?m-h:m;var y=n?g-u:g;var w=n?0:h;var k=n?0:u;var x=w+l-d;var E=k+c-f;var L={};var C=this.align.split(" ");var N=this.className+"-";var $={top:"bottom",bottom:"top",left:"right",right:"left"};var T={top:"top",bottom:"top",left:"left",right:"left"};var I=[{top:y-f,bottom:y+p,left:b-d,right:b+v},{top:y,bottom:y-f+p,left:b,right:b-d+v}];var z={left:b+v/2-d/2,top:y+p/2-f/2};var M={left:[w,x],top:[k,E]};j.each(C,function(t,e){if(I[t][e]>M[T[e]][1]){e=C[t]=$[e]}if(I[t][e]<M[T[e]][0]){C[t]=$[e]}});if(!C[1]){T[C[1]]=T[C[0]]==="left"?"top":"left";I[1][C[1]]=z[T[C[1]]]}N+=C.join("-")+" "+this.className+"-follow";s.__followSkin=N;if(e){i.addClass(N)}L[T[C[0]]]=parseInt(I[0][C[0]]);L[T[C[1]]]=parseInt(I[1][C[1]]);i.css(L)},__offset:function(t){var e=t.parentNode;var i=e?j(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var r=t.ownerDocument;var s=r.defaultView||r.parentWindow;if(s==window){return i}var n=s.frameElement;var a=j(r);var o=a.scrollLeft();var l=a.scrollTop();var c=j(n).offset();var h=c.left;var u=c.top;return{left:i.left+h-o,top:i.top+u-l}}});o.zIndex=1024;o.current=null;return o});t("dialog-config",{backdropBackground:"#000",backdropOpacity:.5,content:'<span class="ui-dialog-loading">Loading..</span>',title:"消息",statusbar:"",button:null,ok:null,cancel:null,okValue:"确定",cancelValue:"取消",cancelDisplay:true,width:"",height:"",padding:"",skin:"",quickClose:false,cssUri:"",innerHTML:'<div i="dialog" class="ui-dialog">'+'<div class="ui-dialog-arrow-a"></div>'+'<div class="ui-dialog-arrow-b"></div>'+'<table class="ui-dialog-grid">'+"<tr>"+'<td i="header" class="ui-dialog-header">'+'<button i="close" class="ui-dialog-close">&#215;</button>'+'<div i="title" class="ui-dialog-title"></div>'+"</td>"+"</tr>"+"<tr>"+'<td i="body" class="ui-dialog-body">'+'<div i="content" class="ui-dialog-content"></div>'+"</td>"+"</tr>"+"<tr>"+'<td i="footer" class="ui-dialog-footer">'+'<div i="statusbar" class="ui-dialog-statusbar"></div>'+'<div i="button" class="ui-dialog-button"></div>'+"</td>"+"</tr>"+"</table>"+"</div>"});t("dialog",function(t){var o=t("jquery");var l=t("popup");var e=t("dialog-config");var i=e.cssUri;if(i){var r=t[t.toUrl?"toUrl":"resolve"];if(r){i=r(i);i='<link rel="stylesheet" href="'+i+'" />';if(o("base")[0]){o("base").before(i)}else{o("head").append(i)}}}var c=0;var a=new Date-0;var s=!("minWidth"in o("html")[0].style);var h="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent);var u=!s&&!h;var d=function(t,e,i){var r=t=t||{};if(typeof t==="string"||t.nodeType===1){t={content:t,fixed:!h}}t=o.extend(true,{},d.defaults,t);t.original=r;var s=t.id=t.id||a+c;var n=d.get(s);if(n){return n.focus()}if(!u){t.fixed=false}if(t.quickClose){t.modal=true;t.backdropOpacity=0}if(!o.isArray(t.button)){t.button=[]}if(i!==undefined){t.cancel=i}if(t.cancel){t.button.push({id:"cancel",value:t.cancelValue,callback:t.cancel,display:t.cancelDisplay})}if(e!==undefined){t.ok=e}if(t.ok){t.button.push({id:"ok",value:t.okValue,callback:t.ok,autofocus:true})}return d.list[s]=new d.create(t)};var n=function(){};n.prototype=l.prototype;var f=d.prototype=new n;d.create=function(t){var a=this;o.extend(this,new l);var e=t.original;var i=o(this.node).html(t.innerHTML);var r=o(this.backdrop);this.options=t;this._popup=i;o.each(t,function(t,e){if(typeof a[t]==="function"){a[t](e)}else{a[t]=e}});if(t.zIndex){l.zIndex=t.zIndex}i.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")});this._$("close").css("display",this.cancel===false?"none":"").attr("title",this.cancelValue).on("click",function(t){a._trigger("cancel");t.preventDefault()});this._$("dialog").addClass(this.skin);this._$("body").css("padding",this.padding);if(t.quickClose){r.on("onmousedown"in document?"mousedown":"click",function(){a._trigger("cancel");return false})}this.addEventListener("show",function(){r.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)});this._esc=function(t){var e=t.target;var i=e.nodeName;var r=/^input|textarea$/i;var s=l.current===a;var n=t.keyCode;if(!s||r.test(i)&&e.type!=="button"){return}if(n===27){a._trigger("cancel")}};o(document).on("keydown",this._esc);this.addEventListener("remove",function(){o(document).off("keydown",this._esc);delete d.list[this.id]});c++;d.oncreate(this);return this};d.create.prototype=f;o.extend(f,{content:function(t){var e=this._$("content");if(typeof t==="object"){t=o(t);e.empty("").append(t.show());this.addEventListener("remove",function(){o("body").append(t.hide())})}else{e.html(t)}return this.reset()},title:function(t){this._$("title").text(t);this._$("header")[t?"show":"hide"]();return this},width:function(t){this._$("content").css("width",t);return this.reset()},height:function(t){this._$("content").css("height",t);return this.reset()},button:function(t){t=t||[];var s=this;var n="";var a=0;this.callbacks={};if(typeof t==="string"){n=t;a++}else{o.each(t,function(t,e){var i=e.id=e.id||e.value;var r="";s.callbacks[i]=e.callback;if(e.display===false){r=' style="display:none"'}else{a++}n+="<button"+' type="button"'+' i-id="'+i+'"'+r+(e.disabled?" disabled":"")+(e.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+e.value+"</button>";s._$("button").on("click","[i-id="+i+"]",function(t){var e=o(this);if(!e.attr("disabled")){s._trigger(i)}t.preventDefault()})})}this._$("button").html(n);this._$("footer")[a?"show":"hide"]();return this},statusbar:function(t){this._$("statusbar").html(t)[t?"show":"hide"]();return this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return typeof e!=="function"||e.call(this)!==false?this.close().remove():this}});d.oncreate=o.noop;d.getCurrent=function(){return l.current};d.get=function(t){return t===undefined?d.list:d.list[t]};d.list={};d.defaults=e;return d});t("drag",function(t){var s=t("jquery");var m=s(window);var g=s(document);var e="createTouch"in document;var i=document.documentElement;var r=!("minWidth"in i.style);var n=!r&&"onlosecapture"in i;var a="setCapture"in i;var o={start:e?"touchstart":"mousedown",over:e?"touchmove":"mousemove",end:e?"touchend":"mouseup"};var l=e?function(t){if(!t.touches){t=t.originalEvent.touches.item(0)}return t}:function(t){return t};var b=function(){this.start=s.proxy(this.start,this);this.over=s.proxy(this.over,this);this.end=s.proxy(this.end,this);this.onstart=this.onover=this.onend=s.noop};b.types=o;b.prototype={start:function(t){t=this.startFix(t);g.on(o.over,this.over).on(o.end,this.end);this.onstart(t);return false},over:function(t){t=this.overFix(t);this.onover(t);return false},end:function(t){t=this.endFix(t);g.off(o.over,this.over).off(o.end,this.end);this.onend(t);return false},startFix:function(t){t=l(t);this.target=s(t.target);this.selectstart=function(){return false};g.on("selectstart",this.selectstart).on("dblclick",this.end);if(n){this.target.on("losecapture",this.end)}else{m.on("blur",this.end)}if(a){this.target[0].setCapture()}return t},overFix:function(t){t=l(t);return t},endFix:function(t){t=l(t);g.off("selectstart",this.selectstart).off("dblclick",this.end);if(n){this.target.off("losecapture",this.end)}else{m.off("blur",this.end)}if(a){this.target[0].releaseCapture()}return t}};b.create=function(c,t){var h=s(c);var e=new b;var i=b.types.start;var r=function(){};var u=c.className.replace(/^\s|\s.*/g,"")+"-drag-start";var d;var f;var v;var p;var _={onstart:r,onover:r,onend:r,off:function(){h.off(i,e.start)}};e.onstart=function(t){var e=h.css("position")==="fixed";var i=g.scrollLeft();var r=g.scrollTop();var s=h.width();var n=h.height();d=0;f=0;v=e?m.width()-s+d:g.width()-s;p=e?m.height()-n+f:g.height()-n;var a=h.offset();var o=this.startLeft=e?a.left-i:a.left;var l=this.startTop=e?a.top-r:a.top;this.clientX=t.clientX;this.clientY=t.clientY;h.addClass(u);_.onstart.call(c,t,o,l)};e.onover=function(t){var e=t.clientX-this.clientX+this.startLeft;var i=t.clientY-this.clientY+this.startTop;var r=h[0].style;e=Math.max(d,Math.min(v,e));i=Math.max(f,Math.min(p,i));r.left=e+"px";r.top=i+"px";_.onover.call(c,t,e,i)};e.onend=function(t){var e=h.position();var i=e.left;var r=e.top;h.removeClass(u);_.onend.call(c,t,i,r)};e.off=function(){h.off(i,e.start)};if(t){e.start(t)}else{h.on(i,e.start)}return _};return b});t("dialog-plus",function(t){var l=t("jquery");var n=t("dialog");var c=t("drag");n.oncreate=function(e){var i=e.options;var t=i.original;var r=i.url;var s=i.oniframeload;var n;if(r){this.padding=i.padding=0;n=l("<iframe />");n.attr({src:r,name:e.id,width:"100%",height:"100%",allowtransparency:"yes",frameborder:"no",scrolling:"no"}).on("load",function(){var t;try{t=n[0].contentWindow.frameElement}catch(t){}if(t){if(!i.width){e.width(n.contents().width())}if(!i.height){e.height(n.contents().height())}}if(s){s.call(e)}});e.addEventListener("beforeremove",function(){n.attr("src","about:blank").remove()},false);e.content(n[0]);e.iframeNode=n[0]}if(!(t instanceof Object)){var a=function(){e.close().remove()};for(var o=0;o<frames.length;o++){try{if(t instanceof frames[o].Object){l(frames[o]).one("unload",a);break}}catch(t){}}}l(e.node).on(c.types.start,"[i=title]",function(t){if(!e.follow){e.focus();c.create(e.node,t)}})};n.get=function(t){if(t&&t.frameElement){var e=t.frameElement;var i=n.list;var r;for(var s in i){r=i[s];if(r.node.getElementsByTagName("iframe")[0]===e){return r}}}else if(t){return n.list[t]}};return n});window.dialog=s("dialog-plus")}();